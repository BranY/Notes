<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.1.1 (456663)"/><meta name="altitude" content="11.38462257385254"/><meta name="author" content="杨文家"/><meta name="created" content="2018-05-19 12:48:37 +0000"/><meta name="latitude" content="30.19547523312549"/><meta name="longitude" content="120.1919652606613"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2018-05-20 12:53:00 +0000"/><title>常见推荐算法</title></head><body><div>不同算法的优缺点及其使用范围</div><div><br/></div><div>推荐系统的评价指标：用户满意度（点击率/转化率）、准确性（precision/recall）、覆盖率（长尾物品和用户）、多样性、新颖型、用户信任度（推荐理由）、鲁棒性（反作弊）、实时性</div><div><br/></div><div style="text-align: center; "><span style="background-color: rgb(255, 250, 165);font-size: 18px;-evernote-highlight:true;">推荐系统的核心问题：匹配+排序 （候选集产生 -〉匹配-〉排序或者重排序 ）</span></div><div style="text-align: center;"><img src="%E5%B8%B8%E8%A7%81%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95.resources/004C78FC-EC0A-4908-8904-05BDAA0A3F1C.png" height="1302" width="1468"/><br/></div><div style="text-align: left;"><br/></div><div style="text-align: left;">结合推荐系统的发展趋势</div><div style="text-align: left;"><br/></div><hr/><div><span style="font-size: 18px;">协同过滤</span></div><div><span style="font-size: 18px;">基于用户的协同过滤算法UserCF</span></div><div><br/></div><div>基于用户的协同过滤，通过不同用户对物品的评分来评测用户之间的相似性，<span style="color: rgb(255, 38, 0);">基于用户间的相似性做出推荐</span>。简单来讲就是：给用户推荐和他兴趣相似的其他用户喜欢的物品。基于UserCF的基本思想相当简单，基于用户对物品的偏好找到相邻邻居用户，然后将邻居用户喜欢的推荐给当前用户。计算上，就是将一个用户对所有物品的偏好作为一个向量来计算用户之间的相似度，找到K邻居后，根据邻居的相似度权重以及他们对物品的偏好，预测当前用户没有偏好的未涉及物品，计算得到一个排序的物品列表作为推荐。</div><div><br/></div><div><span style="font-size: 18px;">存在的挑战（聚类方法、矩阵分解）</span></div><ul><li><div><span style="font-size: 18px;">样本稀疏问题：两个用户可能只有0.1%的概率买过同一个东西</span></div></li><li><div><span style="font-size: 18px;">相似度怎么度量有效</span></div></li></ul><div><br/></div><div><br/></div><div><span style="font-size: 18px;">基于物品的协同过滤算法ItemCF</span></div><div><br/></div><div><span style="color: rgb(255, 38, 0);">基于item的协同过滤，通过用户对不同item的评分来评测item之间的相似性，基于item之间的相似性做出推荐</span>。简单来讲就是：给用户推荐和他之前喜欢的物品相似的物品。基于ItemCF的原理和基于UserCF类似，只是在计算邻居时采用物品本身，而不是从用户的角度，即基于用户对物品的偏好找到相似的物品，然后根据用户的历史偏好，推荐相似的物品给他。</div><div><br/></div><div>从计算的角度看，就是将所有用户对某个物品的偏好作为一个向量来计算物品之间的相似度，得到物品的相似物品后，根据用户历史的偏好预测当前用户还没有表示偏好的物品，计算得到一个排序的物品列表作为推荐。</div><div><br/></div><div><span style="font-size: 18px;">User CF 和Item CF的比较：</span></div><div><br/></div><div><span style="color: rgb(255, 38, 0);">对于电子商务</span>，用户数量一般大大超过商品数量，此时Item CF的计算复杂度较低。<span style="color: rgb(255, 38, 0);">在非社交网络的网站中，内容内在的联系是很重要的推荐原则，它比基于相似用户的推荐原则更加有效</span>。比如在购书网站上，当你看一本书的时候，推荐引擎会给你推荐相关的书籍，这个推荐的重要性远远超过了网站首页对该用户的综合推荐。可以看到，在这种情况下，Item CF 的推荐成为了引导用户浏览的重要手段。基于物品的协同过滤算法，是目前电子商务采用最广泛的推荐算法。<span style="color: rgb(255, 38, 0);">在社交网络站点中</span>，User CF 是一个更不错的选择，User CF 加上社会网络信息，可以增加用户对推荐解释的信服程度。</div><div><br/></div><div><span style="font-size: 18px;">基于聚类的方法：</span></div><ul><li><div>减少了最近邻的数量，缓解了稀疏性问题</div></li><li><div>发现了用户或商品之间的潜在相似性</div></li></ul><div><span style="font-size: 18px;">常用方法：</span></div><ul><li><div>LSH</div></li><li><div>主题模型</div></li></ul><div><br/></div><div><span style="font-size: 18px;">广义线性模型：</span></div><ul><li><div>海量训练数据（10倍于特征数量）</div></li><li><div>超高维特征</div></li><li><div>高效实时预测、训练</div></li><li><div>易于持续迭代优化</div></li></ul><div>高维稀疏特征与人工特征工程：</div><ul><li><div>ID型、离散型特征通常采用one-hot编码方式</div></li><li><div>特征组合：非线形关系建模通过特征组合实现，产生海量特征维度，是海量特征的主要来源</div></li><li><div>特征压缩方法：特征哈希</div></li></ul><div><br/></div><div><span style="background-color: rgb(255, 250, 165);font-size: 18px;-evernote-highlight:true;">在线学习与FTRL</span></div><div>实时增量训练的必要性：</div><ul><li><div>每天亿级别的用户日志数据</div></li><li><div>上亿的模型参数需要更新</div></li><li><div>每天进行海量的模型预测</div></li><li><div>可以更好的学习用户实时的兴趣或者商品的实时变化趋势</div></li></ul><div><br/></div><div><span style="font-size: 18px; color: rgb(170, 121, 66);">每个特征独立的学习率；L1+L2正则化，实现预测准确性和模型稀疏性的平衡；</span></div><div><br/></div><div>MLR模型：</div><ul><li><div>将特征空间划分几个几个本地区域</div></li><li><div>在每个本地区域拟合一个LR模型</div></li><li><div>联合自动学习</div></li><li><div>实现对非线形关系的拟合</div></li></ul><div><br/></div><div>总结：</div><div>从数据到发现结构</div><ul><li><div>矩阵分解，发现用户、商品的潜在结构（latent vector）</div></li><li><div>FM/FFM， 发现特征交互的潜在结构</div></li><li><div>深度学习自动发现特征表达和交互结构</div></li></ul><div>从人工参与到动态自适应：</div><ul><li><div>LR：依赖于人工特征工程</div></li><li><div>FM/FFM， 实现交互特征的自动学习和选择</div></li><li><div>强化学习实现更自然，更高级的动态自适应</div></li></ul><div><br/></div><hr/><div style="text-align: center; "><span style="font-size: 24px;">爱奇艺分享</span></div><div><span style="font-size: 18px;">1.LR模型：baseline</span></div><ul><li><div><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(62, 62, 62); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">将重点放到架构设计上，尽量保证架构的正确性</span></div></li><li><div><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(62, 62, 62); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">LR模型的解释性强，方便debug，并且通过特征权重可以解释推荐的内容，找到模型的不足之处</span></div></li><li><div><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(62, 62, 62); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">LR是个线性分类模型，要求输入是线性独立特征。我们使用的</span><span style="max-width: 100%; box-sizing: border-box; font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); word-wrap: break-word !important; color: rgb(62, 62, 62); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">稠密的特征</span><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(62, 62, 62); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">（维度在几十到几百之间）往往都是非线性的，并且具有依赖性，因此需要对特征进行转换。</span></div></li></ul><div><span style="caret-color: rgb(62, 62, 62); color: rgb(62, 62, 62); font-family: -apple-system-font;">缺点：</span></div><ul><li><div><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">特征都需要人工进行转换为线性特征，十分消耗人力，并且质量不能保证</span></div></li><li><div><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">特征两两作Interaction 的情况下，模型预测复杂度是。在100维稠密特征的情况下，就会有组合出10000维的特征，复杂度高，增加特征困难</span></div></li><li><div><span style="caret-color: rgb(66, 99, 6); color: rgb(66, 99, 6); font-family: -apple-system-font;">三个以上的特征进行interaction几乎不可能</span></div></li><li><div><br/></div></li></ul><div><br/></div><div><span style="font-size: 18px;">2.GBDT+LR</span></div><div><span style="font-size: 18px;">优点：</span></div><ul><li><div><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">对输入特征的分布没有要求</span></div></li><li><div><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">根据熵增益自动进行特征转换、特征组合、特征选择和离散化，得到高维的组合特征，省去了人工转换的过程，并且支持了多个特征的Interaction</span></div></li><li><div><span style="max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; word-wrap: break-word !important; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">预测复杂度与特征个数无关：</span><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; widows: 2; text-align: justify; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">假设特征个数n=160决策数个数k=50，树的深度d=6，两代模型的预测复杂度对比如下，升级之后模型复杂度降低到原来的2.72%</span></div></li><li><div><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(62, 62, 62); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">GBDT与LR的stacking模型相对于只用GBDT会有略微的提升，更大的好处是防止GBDT过拟合。升级为GBDT+LR后，线上效果提升了约5%，并且因为省去了对新特征进行人工转换的步骤，增加特征的迭代测试也更容易了</span></div></li></ul><div><br/></div><div><font color="#3e3e3e" style="font-size: 18px;" face="Helvetica Neue"><span style="caret-color: rgb(62, 62, 62); font-size: 18px; color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;;">缺点：</span></font></div><ul><li><div><span style="max-width: 100%; box-sizing: border-box; font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; word-wrap: break-word !important;"><span style="font-size: 14px; color: rgb(170, 121, 66); font-family: &quot;Helvetica Neue&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">GBDT+LR排序模型中输入特征维度为几百维，都是稠密的通用特征</span><span style="font-size: 14px; color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">。</span><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">这种特征的泛化能力良好，但是记忆能力比较差，所以需要增加高维的（百万维以上）内容特征来增强推荐的记忆能力，包括视频ID，标签，主题等特征。</span></span></span></div></li><li><div><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; color: rgb(255, 38, 0); font-family: &quot;Helvetica Neue&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">GBDT是不支持高维稀疏特征的</span><span style="font-size: 14px; color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">，如果将高维特征加到LR中，</span><span style="background-color: rgb(255, 250, 165); font-size: 14px; color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">一方面需要人工组合高维特征，另一方面模型维度和计算复杂度会是O（N^2）级别的增长</span></span></div></li></ul><div><br/></div><div><span style="font-size: 18px;">3.GBDT+FM/FFM</span></div><div style="text-align: center; "><img src="%E5%B8%B8%E8%A7%81%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95.resources/429DFC6D-D293-427A-9D5D-472737263EBB.png" height="864" width="1298"/><br/></div><div style="text-align: center;"><img src="%E5%B8%B8%E8%A7%81%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95.resources/A64ADA96-AF94-4D07-9D5E-2ADF6BDA063A.png" height="192" width="990"/><br/></div><div style="text-align: left;"><span style="font-size: 18px;">FM的优点：</span></div><ul><li><div style="text-align: left;"><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; color: rgb(170, 121, 66); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">前两项为一个线性模型，相当于LR模型的作用</span></span></div></li><li><div style="text-align: left;"><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">第三项为一个二次交叉项，能够自动对特征进行交叉组合</span></div></li><li><div style="text-align: left;"><span style="max-width: 100%;box-sizing: border-box;clear: both;min-height: 1em;white-space: normal;word-wrap: break-word !important;-en-paragraph:true;"><span style="color: rgb(170, 121, 66);">通过增加隐向量，模型训练和预测的计算复杂度降为了O(N)
</span></span></div></li><li><div style="text-align: left;"><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">支持稀疏特征</span></div></li></ul><div style="text-align: left;"><span style="font-size: 14px; box-sizing: border-box; clear: both; letter-spacing: 0.544px; max-width: 100%; min-height: 1em; orphans: 2; text-indent: 0px; text-transform: none; -webkit-text-stroke-width: 0px; white-space: normal; widows: 2; word-spacing: 0px; word-wrap: break-word; color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">这几个优点，使的GBDT+FM具有了</span><span style="background-color: rgb(255, 250, 165); font-size: 14px; color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">良好的稀疏特征支持</span><span style="font-size: 14px; box-sizing: border-box; clear: both; letter-spacing: 0.544px; max-width: 100%; min-height: 1em; orphans: 2; text-indent: 0px; text-transform: none; -webkit-text-stroke-width: 0px; white-space: normal; widows: 2; word-spacing: 0px; word-wrap: break-word; color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">，</span><span style="max-width: 100%;box-sizing: border-box;clear: both;min-height: 1em;font-size: 14px;letter-spacing: 0.544px;orphans: 2;text-indent: 0px;text-transform: none;white-space: normal;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;word-wrap: break-word !important;-en-paragraph:true;"><span style="font-size: 14px; color: rgb(170, 121, 66); font-family: &quot;Helvetica Neue&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">FM使用GBDT的叶子结点和稀疏特征（内容特征）作为输入</span></span><span style="max-width: 100%; box-sizing: border-box; clear: both; min-height: 1em; font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; word-wrap: break-word !important; color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">，GBDT+FM模型上线后相比GBDT+LR在各项指标的效果提升在4%~6%之间。</span></div><div style="text-align: left;"><span style="font-size: 14px;letter-spacing: 0.544px;orphans: 2;widows: 2;max-width: 100%;clear: both;min-height: 1em;word-wrap: break-word !important;-en-paragraph:true;"><span style="font-size: 14px; color: rgb(255, 38, 0); font-family: &quot;Helvetica Neue&quot;; font-variant-ligatures: normal;">典型的FM模型中使用user id作为用户特征，这会导致模型维度迅速增大，并且只能覆盖部分热门用户，泛化能力比较差</span></span><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; widows: 2; max-width: 100%; clear: both; min-height: 1em; word-wrap: break-word !important; color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;; font-variant-ligatures: normal;-en-paragraph:true;">。在此我们使用用户的观看历史以及兴趣标签代替user id，降低了特征维度，并且因为用户兴趣是可以复用的，同时也提高了对应特征的泛化能力。
</span></div><div style="orphans: 2; widows: 2; text-align: left;"><font color="#3e3e3e" face="Helvetica Neue" style="font-size: 18px;"><span style="caret-color: rgb(62, 62, 62); letter-spacing: 0.5440000295639038px; font-size: 18px; color: rgb(62, 62, 62); font-family: &quot;Helvetica Neue&quot;;">优化方法：</span></font></div><ul><li><div style="orphans: 2; widows: 2; text-align: left;"><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">SGD和L-BFGS效果相差不大，L-BFGS的效果与参数初始化关系紧密</span></div></li><li><div style="orphans: 2; widows: 2; text-align: left;"><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">FTRL，较SGD有以下优势：</span></div></li><ul><li><div style="orphans: 2; widows: 2; text-align: left;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">带有L1正则，学习的特征更加稀疏</span></div></li><li><div style="orphans: 2; widows: 2; text-align: left;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; color: rgb(170, 121, 66); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">使用累计的梯度，加速收敛</span></span></div></li><li><div style="orphans: 2; widows: 2; text-align: left;"><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">根据特征在样本的出现频率确定该特征学习率，保证每个特征有充分的学习</span></div></li><li><div style="orphans: 2; widows: 2; text-align: left;"><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px; color: rgb(170, 121, 66); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">FM模型中的特征出现的频次相差很大，FTRL能够保证每个特征都能得到充分的学习，更适合稀疏特征</span></span></div></li></ul></ul><div style="orphans: 2; widows: 2; text-align: left;"><br/></div><div style="orphans: 2; widows: 2; text-align: left;"><span style="font-size: 18px;">GBDT+FM/FFM缺点：</span></div><ul><li><div style="orphans: 2; widows: 2; text-align: left;"><span style="font-size: 18px;"><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(170, 121, 66); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">对embedding等具有结构信息的深度特征利用不充分</span></span></div></li><li><div style="orphans: 2; widows: 2; text-align: left;"><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(62, 62, 62); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">深度学习（Deep Neural Network）能够对嵌入式（embedding）特征和普通稠密特征进行学习，抽取出深层信息，提高模型的准确性，并已经成功应用到众多机器学习领域。因此将DNN引入到排序模型中，可以提高排序整体质量。</span></div></li></ul><div><span style="font-size: 18px;">4.DNN+GBDT+FM/FFM</span></div><div style="text-align: center; "><img src="%E5%B8%B8%E8%A7%81%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95.resources/C0C79D50-E679-48D9-A260-A07BC32CFB7A.png" height="572" width="1346"/><br/></div><div><span style="font-size: 18px;">DNN模型</span></div><ul><li><div><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">使用全连接网络，共三个隐藏层：<span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">隐藏节点数目分别为1024，512和256</span></span></div></li><li><div><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">预训练好的用户和视频的Embedding向量，包含基于用户行为以及基于语义内容的两种Embedding</span></div></li><li><div><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">DNN能从具有良好数学分布的特征中抽取深层信息，比如embedding特征，归一化后统计特征等等</span></div></li><li><div><span style="font-size: 14px; letter-spacing: 0.544px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">虽然DNN并不要求特征必须归一化，不过测试发现有些特征因为outlier的波动范围过大，会导致DNN效果下降。</span></div></li></ul><div><span style="font-size: 18px;">GBDT模型</span></div><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">单独进行训练，输入包含归一化和未归一化的稠密特征</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">能处理未归一化的连续和离散特征</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">能根据熵增益自动对输入特征进行离散和组合</span></div></li></ul><div><span style="font-size: 18px;">FM融合层</span></div><ul><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">FM模型与DNN模型作为同一个网络同时训练</span></div></li><li><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(66, 99, 6); font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">将DNN特征，GBDT输出和稀疏特征进行融合并交叉</span></div></li></ul><div><br/></div><hr/><div><span style="font-size: 18px;">参考链接：</span></div><ul><li><div><a href="https://blog.csdn.net/acdreamers/article/details/44672305">协同过滤算法简介</a></div></li><li><div><a href="https://www.ibm.com/developerworks/cn/web/1103_zhaoct_recommstudy2/index.html">深入推荐引擎相关算法-协同过滤</a></div></li><li><div><a href="https://www.ibm.com/developerworks/cn/web/1103_zhaoct_recommstudy3/index.html?ca=drs-">深入推荐引擎相关算法-聚类</a></div></li><li><div><a href="https://mp.weixin.qq.com/s/lUP2BehOh7KczR3WRnOqFw">爱奇艺个性化推荐实践</a></div></li><li><div><a href="https://zhuanlan.zhihu.com/p/32523455">CTR模型汇总</a></div></li><li><div><a href="https://zhuanlan.zhihu.com/p/27999355">DeepFM</a></div></li><li><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 14px;"><a href="https://blog.csdn.net/happytofly/article/details/80124474" style="font-size: 14px; font-family: &quot;Helvetica Neue&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">用户在线广告点击行为预测的深度学习模型</a></font></span></div></li><li><div><span style="caret-color: rgb(51, 51, 51);"><a href="https://mp.weixin.qq.com/s/nboZ6p_l30L__FJNyz6Ohw">深度学习如何应用在广告、推荐以及搜索业务？</a></span></div></li><li><div><a href="http://d0evi1.com/widedeep-recsys/">基于Wide&amp;Deep的推荐系统</a></div></li></ul><div><br/></div></body></html>